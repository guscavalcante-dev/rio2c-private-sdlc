@using Mvc.Mailer
@model PlataformaRio2C.Application.CQRS.Commands.SendUnreadConversationEmailAsync
<td valign="top">
    <!-- content -->
    <h1>
        <span>@Labels.Dear @Model.RecipientFirstName,</span>
    </h1>
    <p>
        <span>
            @Html.Raw(Model.NotificationEmailConversationDto.UnreadMessagesCount != 1 ? string.Format(Messages.YouHaveNewMessages, Model.NotificationEmailConversationDto.UnreadMessagesCount) : 
                                                                                        string.Format(Messages.YouHaveNewMessage, Model.NotificationEmailConversationDto.UnreadMessagesCount))
        </span>
    </p>
    <p>
        <span>
            @(Model.NotificationEmailConversationDto.OtherAttendeeCollaboratorDto?.Collaborator?.GetDisplayName() ?? Model.NotificationEmailConversationDto.OtherUser.Name)
        </span>
    </p>
    <p>
        @{
            var jobTitle = Model.NotificationEmailConversationDto.OtherAttendeeCollaboratorDto?.GetJobTitleDtoByLanguageCode(Model.UserInterfaceLanguage);
            var organization = Model.NotificationEmailConversationDto.OtherAttendeeCollaboratorDto?.AttendeeOrganizationsDtos?.FirstOrDefault()?.Organization;
        }

        @if (jobTitle != null)
        {
            <span>@jobTitle.Value</span>
        }

        @if (organization != null)
        {
            if (jobTitle != null)
            {
                <span> / </span>
            }

            <span>@organization.TradeName</span>
        }
    </p>
    <div style="margin-top: 25px; margin-bottom: 25px;">
        <!--Button:begin-->
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td align="center">
                    <table cellpadding="0" cellspacing="0" width="250" border="0" style="border-collapse: separate !important;">
                        <tr>
                            <td style="background-color:#EA202C;color:#FFFFFF;font-family:sans-serif;font-size:16px;font-weight:bold;padding:10px 10px;border-radius:10px;text-align:center;">
                                <a href="@Url.Abs(Url.Action("Messages", "Networks", new { culture = Model.UserInterfaceLanguage, edition = Model.EditionUrlCode, id = Model.NotificationEmailConversationDto.OtherUser?.Uid }))" style="color: #FFFFFF; text-decoration: none;">
                                    @Labels.ViewMessages
                                </a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <!--Button:end-->
    </div>
</td>
@section Styles {
}