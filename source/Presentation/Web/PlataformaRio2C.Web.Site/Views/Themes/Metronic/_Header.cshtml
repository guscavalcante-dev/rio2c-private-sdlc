@using System.Globalization
@using PlataformaRio2c.Infra.Data.FileRepository.Helpers
@using PlataformaRio2C.Domain.Dtos
@using PlataformaRio2C.Domain.Statics
@using Constants = PlataformaRio2C.Domain.Constants;
@{
    var userAccessControlDto = ViewBag.UserAccessControlDto as UserAccessControlDto;
}
<div id="kt_header" class="kt-header  kt-header--fixed " data-ktheader-minimize="on">
    <div class="kt-container ">
        <!-- begin:: Brand -->
        <div class="kt-header__brand   kt-grid__item" id="kt_header_brand">
            <a class="kt-header__brand-logo" href="@Url.Action("Index", "Home", new { Area = "" })">
                <img alt="Logo" src="~/Assets/img/logo_rio2c_white.png" class="kt-header__brand-logo-default" />
                <img alt="Logo" src="~/Assets/img/logo_rio2c_color.png" class="kt-header__brand-logo-sticky" />
            </a>
        </div>
        <!-- end:: Brand -->
        <!-- begin: Header Menu -->
        <button class="kt-header-menu-wrapper-close" id="kt_header_menu_mobile_close_btn"><i class="la la-close"></i></button>
        <div class="kt-header-menu-wrapper kt-grid__item kt-grid__item--fluid" id="kt_header_menu_wrapper">
            <div id="kt_header_menu" class="kt-header-menu kt-header-menu-mobile ">
                @{ Html.RenderPartial("~/Views/Themes/Metronic/_HeaderMenu.cshtml"); }
            </div>
        </div>
        <!-- end: Header Menu -->
        <!-- begin:: Header Topbar -->
        <div class="kt-header__topbar kt-grid__item">
            <!--begin: Edition dropdown -->
            <div class="kt-header__topbar-item dropdown">
                <div class="kt-header__topbar-wrapper" data-toggle="kt-tooltip" title="" data-placement="bottom"> @*data-original-title="@Labels.PastEditions"*@
                    <span class="kt-header__topbar-icon">
                        @{ Html.RenderPartial("~/Views/Themes/Metronic/_EditionSelector.cshtml"); }
                    </span>
                </div>
            </div>
            <!--end: Edition dropdown -->
            @if (userAccessControlDto?.HasAnyCollaboratorType(Constants.CollaboratorType.NetworksArray) == true)
            {
                <!--begin: My Network -->
                <div class="kt-header__topbar-item">
                    <div class="kt-header__topbar-wrapper" @*data-toggle="dropdown" data-offset="10px,0px"*@ onclick="window.location = MyRio2cCommon.getUrlWithCultureAndEdition('/Networks');" data-toggle="kt-tooltip" title="" data-placement="bottom" data-original-title="@Labels.NetworkRio2C">
                        <span class="kt-header__topbar-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon id="Shape" points="0 0 24 0 24 24 0 24" />
                                    <path d="M18,14 C16.3431458,14 15,12.6568542 15,11 C15,9.34314575 16.3431458,8 18,8 C19.6568542,8 21,9.34314575 21,11 C21,12.6568542 19.6568542,14 18,14 Z M9,11 C6.790861,11 5,9.209139 5,7 C5,4.790861 6.790861,3 9,3 C11.209139,3 13,4.790861 13,7 C13,9.209139 11.209139,11 9,11 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero" opacity="0.6" />
                                    <path d="M17.6011961,15.0006174 C21.0077043,15.0378534 23.7891749,16.7601418 23.9984937,20.4 C24.0069246,20.5466056 23.9984937,21 23.4559499,21 L19.6,21 C19.6,18.7490654 18.8562935,16.6718327 17.6011961,15.0006174 Z M0.00065168429,20.1992055 C0.388258525,15.4265159 4.26191235,13 8.98334134,13 C13.7712164,13 17.7048837,15.2931929 17.9979143,20.2 C18.0095879,20.3954741 17.9979143,21 17.2466999,21 C13.541124,21 8.03472472,21 0.727502227,21 C0.476712155,21 -0.0204617505,20.45918 0.00065168429,20.1992055 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero" />
                                </g>
                            </svg>
                        </span>
                        <!--<span class="kt-badge kt-badge--light"></span>-->
                    </div>
                </div>
                <!--end: My Network -->
                <!--begin: My Inbox -->
                <div class="kt-header__topbar-item">
                    <div class="kt-header__topbar-wrapper" @*data-toggle="dropdown" data-offset="10px,0px"*@ onclick="window.location = MyRio2cCommon.getUrlWithCultureAndEdition('/Networks/Messages');" data-toggle="kt-tooltip" title="" data-placement="bottom" data-original-title="@Labels.Messages">
                        <span class="kt-header__topbar-icon kt-pulse kt-pulse--light">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24" />
                                    <path d="M16,15.6315789 L16,12 C16,10.3431458 14.6568542,9 13,9 L6.16183229,9 L6.16183229,5.52631579 C6.16183229,4.13107011 7.29290239,3 8.68814808,3 L20.4776218,3 C21.8728674,3 23.0039375,4.13107011 23.0039375,5.52631579 L23.0039375,13.1052632 L23.0206157,17.786793 C23.0215995,18.0629336 22.7985408,18.2875874 22.5224001,18.2885711 C22.3891754,18.2890457 22.2612702,18.2363324 22.1670655,18.1421277 L19.6565168,15.6315789 L16,15.6315789 Z" fill="#000000" />
                                    <path d="M1.98505595,18 L1.98505595,13 C1.98505595,11.8954305 2.88048645,11 3.98505595,11 L11.9850559,11 C13.0896254,11 13.9850559,11.8954305 13.9850559,13 L13.9850559,18 C13.9850559,19.1045695 13.0896254,20 11.9850559,20 L4.10078614,20 L2.85693427,21.1905292 C2.65744295,21.3814685 2.34093638,21.3745358 2.14999706,21.1750444 C2.06092565,21.0819836 2.01120804,20.958136 2.01120804,20.8293182 L2.01120804,18.32426 C1.99400175,18.2187196 1.98505595,18.1104045 1.98505595,18 Z M6.5,14 C6.22385763,14 6,14.2238576 6,14.5 C6,14.7761424 6.22385763,15 6.5,15 L11.5,15 C11.7761424,15 12,14.7761424 12,14.5 C12,14.2238576 11.7761424,14 11.5,14 L6.5,14 Z M9.5,16 C9.22385763,16 9,16.2238576 9,16.5 C9,16.7761424 9.22385763,17 9.5,17 L11.5,17 C11.7761424,17 12,16.7761424 12,16.5 C12,16.2238576 11.7761424,16 11.5,16 L9.5,16 Z" fill="#000000" opacity="0.6" />
                                </g>
                            </svg>
                            <span id="NewMessagePulse" class="kt-pulse__ring @(userAccessControlDto.HasUnreadMessages ? string.Empty : "d-none")"></span>
                        </span>
                        <!--<span class="kt-badge kt-badge--light"></span>-->
                    </div>
                </div>
                <!--end: My Inbox -->
            }
            <!--begin: Agenda -->
            <div class="kt-header__topbar-item dropdown">
                <div class="kt-header__topbar-wrapper" onclick="window.location = MyRio2cCommon.getUrlWithCultureAndEdition('/Agendas');" data-toggle="kt-tooltip" title="" data-placement="bottom" data-original-title="@Labels.Agenda">
                    <span class="kt-header__topbar-icon">
                        <i class="flaticon-event-calendar-symbol"></i>
                    </span>
                </div>
            </div>
            <!--end: Agenda -->
            <!--begin: Language bar -->
            @{ Html.RenderPartial("~/Views/Themes/Metronic/_LanguageSelector.cshtml"); }
            <!--end: Language bar -->
            <!--begin: User bar -->
            <div class="kt-header__topbar-item kt-header__topbar-item--user">
                <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                    <span class="kt-header__topbar-welcome">@Labels.Hi,</span>
                    <span class="kt-header__topbar-username">@(userAccessControlDto?.GetFirstName())</span>
                    @if (userAccessControlDto?.HasImage() == true)
                    {
                        <img alt="Pic" src="@ImageHelper.GetImageUrl(FileRepositoryPathType.UserImage, userAccessControlDto.Collaborator.Uid, userAccessControlDto.Collaborator.ImageUploadDate, true)" />
                    }
                    else
                    {
                        <span class="kt-header__topbar-icon"><b>@(userAccessControlDto?.GetNameAbbreviationCode())</b></span>
                    }
                </div>
                <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim dropdown-menu-xl">
                    <!--begin: Head -->
                    <div class="kt-user-card kt-user-card--skin-dark kt-notification-item-padding-x" style="background-image: url(/Assets/themes/metronic/media/misc/bg-1.jpg)">
                        <div class="kt-user-card__avatar">
                            @if (userAccessControlDto?.HasImage() == true)
                            {
                                <img alt="Pic" src="@ImageHelper.GetImageUrl(FileRepositoryPathType.UserImage, userAccessControlDto.Collaborator.Uid, userAccessControlDto.Collaborator.ImageUploadDate, true)" />
                            }
                            else
                            {
                                <span class="kt-badge kt-badge--lg kt-badge--rounded kt-badge--bold kt-font-success">@(userAccessControlDto?.GetNameAbbreviationCode())</span>
                            }
                        </div>
                        <div class="kt-user-card__name">
                            @(userAccessControlDto?.GetFullName(CultureInfo.CurrentCulture.ToString()))
                        </div>
                        @*<div class="kt-user-card__badge">
                        <span class="btn btn-success btn-sm btn-bold btn-font-md">23 messages</span>
                    </div>*@
                    </div>
                    <!--end: Head -->
                    <!--begin: Navigation -->
                    <div class="kt-notification">
                        <a href="#" class="kt-notification__item" onclick="AccountsEmailSettings.showUpdateModal(); return false;">
                            <div class="kt-notification__item-icon">
                                <i class="flaticon-multimedia-2 kt-font-success"></i>
                            </div>
                            <div class="kt-notification__item-details">
                                <div class="kt-notification__item-title kt-font-bold">
                                    @Labels.EmailSettings
                                </div>
                                <div class="kt-notification__item-time">
                                    @Messages.ClickHereToChangeEmailSettings
                                </div>
                            </div>
                        </a>
                        <a href="#" class="kt-notification__item" onclick="AccountsPassword.showUpdateModal(); return false;">
                            <div class="kt-notification__item-icon">
                                <i class="flaticon-lock kt-font-success"></i>
                            </div>
                            <div class="kt-notification__item-details">
                                <div class="kt-notification__item-title kt-font-bold">
                                    @Labels.ChangePassword
                                </div>
                                <div class="kt-notification__item-time">
                                    @Messages.ClickHereToChangePassword
                                </div>
                            </div>
                        </a>
                        <div class="kt-notification__custom kt-space-between">
                            @using (Html.BeginForm("LogOff", "Account", new { area = "" }, FormMethod.Post, new { id = "logoutForm" }))
                            {
                                @Html.AntiForgeryToken()
                            }

                            <a onclick="$('#logoutForm').submit();" class="btn btn-label btn-label-brand btn-sm btn-bold">@Labels.LogOut</a>
                            @*<a href="demo4/custom/user/login-v2.html" target="_blank" class="btn btn-clean btn-sm btn-bold">Upgrade Plan</a>*@
                        </div>
                    </div>
                    <!--end: Navigation -->
                </div>
            </div>

            <!--end: User bar -->
        </div>
        <!-- end:: Header Topbar -->
    </div>
</div>